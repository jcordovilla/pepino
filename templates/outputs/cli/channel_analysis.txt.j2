ðŸ“Š Channel Analysis: #{{ channel_info.channel_name }}

Basic Statistics:
â€¢ Total Messages: {{ statistics.total_messages | format_number }}
{%- if statistics.human_messages > 0 and statistics.bot_messages > 0 %}
  
Human Messages: {{ statistics.human_messages | format_number }} ({{ (statistics.human_messages / statistics.total_messages * 100) | format_percentage }}%)
Bot Messages: {{ statistics.bot_messages | format_number }} ({{ (statistics.bot_messages / statistics.total_messages * 100) | format_percentage }}%)
{%- endif %}
â€¢ Total Unique Users: {{ statistics.unique_users | format_number }}
{%- if statistics.unique_human_users > 0 %}
â€¢ Unique Human Users: {{ statistics.unique_human_users | format_number }}
{%- endif %}
â€¢ Average Message Length: {{ statistics.avg_message_length | round(1) }} characters
â€¢ First Message: {{ statistics.first_message | format_timestamp }}
â€¢ Last Message: {{ statistics.last_message | format_timestamp }}

{%- if engagement_metrics %}

ðŸ“ˆ Human Engagement Metrics:
â€¢ Average Replies per Original Post: {{ engagement_metrics.replies_per_post | round(2) }}
â€¢ Posts with Reactions: {{ engagement_metrics.reaction_rate | format_percentage }}% ({{ engagement_metrics.posts_with_reactions }}/{{ statistics.human_messages or statistics.total_messages }})
â€¢ Total Replies: {{ engagement_metrics.total_replies | format_number }} | Original Posts: {{ engagement_metrics.original_posts | format_number }}
â€¢ Note: Bot messages excluded from engagement calculations
{%- endif %}

{%- if top_users %}

ðŸ‘¥ Top Human Contributors:
{%- for user in top_users[:5] %}
â€¢ {{ user.display_name or user.author_name or 'Unknown' }}: {{ user.message_count | format_number }} messages (avg {{ user.avg_message_length | round(0) }} chars)
{%- endfor %}
{%- endif %}

{%- if peak_activity and peak_activity.peak_hours %}

Peak Activity Hours:
{%- for hour_data in peak_activity.peak_hours[:3] %}
â€¢ {{ hour_data.hour }}: {{ hour_data.messages | format_number }} messages
{%- endfor %}
{%- endif %}

{%- if peak_activity and peak_activity.peak_days %}

Activity by Day:
{%- for day_data in peak_activity.peak_days[:3] %}
â€¢ {{ day_data.day }}: {{ day_data.messages | format_number }} messages
{%- endfor %}
{%- endif %}

{%- if recent_activity %}

Recent Activity (Last 7 Days):
{%- for activity in recent_activity[:7] %}
â€¢ {{ activity.date }}: {{ activity.messages | format_number }} messages
{%- endfor %}
{%- endif %}

{%- if health_metrics %}

ðŸ“ˆ Channel Health Metrics (Human Activity):
{%- if health_metrics.total_channel_members > 0 %}
â€¢ Total Channel Members: {{ health_metrics.total_channel_members | format_number }}
â€¢ Human Members Who Ever Posted: {{ statistics.unique_human_users or statistics.unique_users | format_number }} ({{ health_metrics.participation_rate | format_percentage }}%)
â€¢ Weekly Active Human Members: {{ health_metrics.weekly_active | format_number }} ({{ (health_metrics.weekly_active / health_metrics.total_channel_members * 100) | format_percentage }}% of total)
â€¢ Recently Inactive Human Members: {{ health_metrics.inactive_users | format_number }} ({{ (health_metrics.inactive_users / (statistics.unique_human_users or statistics.unique_users) * 100) if (statistics.unique_human_users or statistics.unique_users) > 0 else 0 | format_percentage }}% of human posters)
â€¢ Human Lurkers (Never Posted): {{ health_metrics.lurkers | format_number }} ({{ (health_metrics.lurkers / health_metrics.total_channel_members * 100) | format_percentage }}%)
â€¢ Human Participation Rate: {{ health_metrics.participation_rate | format_percentage }}% (members who have posted)
â€¢ Activity Ratio: {{ health_metrics.weekly_active | format_number }} active / {{ health_metrics.inactive_users | format_number }} inactive / {{ health_metrics.lurkers | format_number }} lurkers
{%- else %}
â€¢ Total Human Members Ever Active: {{ statistics.unique_human_users or statistics.unique_users | format_number }}
â€¢ Weekly Active Human Members: {{ health_metrics.weekly_active | format_number }} ({{ (health_metrics.weekly_active / (statistics.unique_human_users or statistics.unique_users) * 100) if (statistics.unique_human_users or statistics.unique_users) > 0 else 0 | format_percentage }}%)
â€¢ Recently Inactive Human Members: {{ health_metrics.inactive_users | format_number }} ({{ (health_metrics.inactive_users / (statistics.unique_human_users or statistics.unique_users) * 100) if (statistics.unique_human_users or statistics.unique_users) > 0 else 0 | format_percentage }}%)
â€¢ Activity Ratio: {{ health_metrics.weekly_active | format_number }} active / {{ health_metrics.inactive_users | format_number }} inactive
â€¢ Note: Full membership data not available - showing message-based metrics only
{%- endif %}
{%- endif %}

{%- if top_topics %}

ðŸ§  Top Topics Discussed:
{%- for topic in top_topics[:10] %}
{%- if topic and topic.strip() %}
{{ loop.index }}. {{ topic }}
{%- endif %}
{%- endfor %}
{%- endif %} 